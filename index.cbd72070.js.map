{"mappings":"AAEA,MAIMA,EAAaC,SAASC,cAAc,gBACpCC,EAAUF,SAASC,cAAc,YACjCE,EAAWH,SAASC,cAAc,cACxC,IAAIG,EAAO,EAOXC,eAAeC,EAAQC,EAAUC,GAGzB,MAAMC,QAAiBC,MAAM,qEAAkCH,kEAAyEC,iBAC5I,IAAKC,EAASE,GACd,MAAM,IAAIC,MAAMH,EAASI,YAEzB,OAAOJ,EAASK,M,CAkBpB,SAASC,EAAOC,GACd,OAAOA,EAAIC,KAAI,EAACC,cAAEA,EAAaC,aAAEA,EAAYC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KACvE,yCACYJ,iGAGIC,+DAGAC,kEAGGC,mEAGCC,sCAIpBC,KAAK,G,CAjDPzB,EAAW0B,iBAAiB,UAiB5B,SAA4BC,GAC1BA,EAAEC,iBACF,MAAMpB,EAAWmB,EAAEE,cAAcC,SAASC,YAAYC,MACtDC,aAAaC,QAAQ,QAAS1B,GAE/BD,EAAQC,EAAS,GAAG2B,MAAKC,GAAQjC,EAAQkC,mBAAmB,YAAarB,EAAOoB,EAAKE,SAAQC,OAAMC,GAAOC,QAAQC,IAAIF,KAEvHrC,EAAQwC,UAAY,GACpBtC,EAAO,C,IAxBPD,EAASsB,iBAAiB,SAoD1B,WACE,MAAMkB,EAAQX,aAAaY,QAAQ,SACnCxC,GAAQ,EACRE,EAAQqC,EAAMvC,GAAM8B,MAAKC,GAAQjC,EAAQkC,mBAAmB,YAAarB,EAAOoB,EAAKE,SAAQC,OAAMC,GAAOC,QAAQC,IAAIF,I","sources":["src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API__KEY = \"38479410-4fdece6f7b350d5238491f06f\"\nconst BASE__URL = \"https://pixabay.com/api/\"\n\n\nconst searchForm = document.querySelector(\".search-form\")\nconst gallery = document.querySelector(\".gallery\")\nconst loadMore = document.querySelector(\".load-more\")\nlet page = 1\n\nsearchForm.addEventListener(\"submit\", onsearchFormSubmit)\nloadMore.addEventListener(\"click\", onLoadMoreClick)\n\n\n\nasync function getUser(searchEl, page) {\n\n// return response = await axios.get(`${BASE__URL}?key=${API__KEY}&q=cat&image_type=photo&orientation=horizontal&safesearch=true`);\n        const response = await fetch(`${BASE__URL}?key=${API__KEY}&q=${searchEl}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`);\n    if (!response.ok) {\n    throw new Error(response.statusText);\n    }\n    return response.json()\n};\n\n\n\nfunction onsearchFormSubmit(e) {\n  e.preventDefault()\n  const searchEl = e.currentTarget.elements.searchQuery.value\n  localStorage.setItem(\"keyEl\", searchEl)\n  \n getUser(searchEl,1).then(resp => gallery.insertAdjacentHTML(\"beforeend\", markup(resp.hits))).catch(err => console.log(err));\n  // e.currentTarget.reset()\ngallery.innerHTML = \"\"\npage = 1\n};\n\n\n\nfunction markup(arr) {\n  return arr.map(({ largeImageURL, webformatURL, likes, views, comments, downloads }) =>\n  `<div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>likes: ${likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>views: ${views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>comments: ${comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>downloads: ${downloads}</b>\n    </p>\n  </div>\n</div>`\n).join(\"\");\n    \n}\n\nfunction onLoadMoreClick() {\n  const local = localStorage.getItem(\"keyEl\")\n  page += 1\n  getUser(local,page).then(resp => gallery.insertAdjacentHTML(\"beforeend\", markup(resp.hits))).catch(err => console.log(err));\n}\n\n\n\n\n// class ApiService {\n//   constructor() {\n//     this.searchQuery = \"\";\n//      this.page = 1;\n//   }\n\n// async  getUser() {\n//  page += 1\n// // return response = await axios.get(`${BASE__URL}?key=${API__KEY}&q=cat&image_type=photo&orientation=horizontal&safesearch=true`);\n//         const response = await fetch(`${BASE__URL}?key=${API__KEY}&q=${this.searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${this.page}&per_page=4`);\n//     if (!response.ok) {\n//     throw new Error(response.statusText);\n//     }\n//     return response.json()\n// };\n\n\n\n//   get query() {\n//   return this.searchQuery\n//   }\n//   set query(newQuery) {\n//     this.searchQuery = newQuery\n//   }\n\n// }\n\n\n\n\n\n\n\n\n\n// webformatURL,largeImageURL,tags,\n\n// ({hits: {likes,views,comments,downloads}})"],"names":["$1f0dc3b9307be026$var$searchForm","document","querySelector","$1f0dc3b9307be026$var$gallery","$1f0dc3b9307be026$var$loadMore","$1f0dc3b9307be026$var$page","async","$1f0dc3b9307be026$var$getUser","searchEl","page1","response","fetch","ok","Error","statusText","json","$1f0dc3b9307be026$var$markup","arr","map","largeImageURL","webformatURL","likes","views","comments","downloads","join","addEventListener","e","preventDefault","currentTarget","elements","searchQuery","value","localStorage","setItem","then","resp","insertAdjacentHTML","hits","catch","err","console","log","innerHTML","local","getItem"],"version":3,"file":"index.cbd72070.js.map"}